const translations = {
    en: {
        pageTitle: "İsmail Öksüz | Computer Engineer & Prompt Engineer",
        sectionProfiles: "Technical Profiles",
        sectionContact: "Contact",
        filterAll: "All",
        filterSoftware: "Software & Language",
        filterData: "Database & SQL",
        filterAI: "AI & Prompt",
        filterParticipation: "Events & Summits",
        hackerRankLink: "My HackerRank Profile",
        headerSubtitle: "Computer Science Engineer | Prompt Engineering Expert",
        buttonContact: "Get in Touch",
        buttonCard: "My Business Card",
        menuTitle: "Menu",
        linkAbout: "About Me",
        linkAwards: "Awards",
        linkCertificates: "Certificates & Training",
        linkProjects: "Featured Projects",
        linkOtherProjects: "All Projects",
        linkContact: "Contact",
        sectionAbout: "About Me",
        aboutText: "I graduated from Marmara University with a degree in Computer Engineering in October 2023. My engineering approach is driven by high mathematical intelligence and sharp analytical reasoning. I possess advanced proficiency in solving complex algorithmic problems and designing optimized systems. I have developed code across both corporate infrastructures and various independent freelance projects. I leverage Advanced Prompt Engineering and AI methodologies as a core expertise to accelerate software architecture and maximize efficiency. I am a results-oriented engineer with a solid foundation in algorithm design and system optimization.",
        nexyondTitle: "Entrepreneurship Project: NEXYOND",
        nexyondDesc: "A digital solutions venture focusing on mobile/web solutions, building the future today with Software, Design, and Artificial Intelligence. (The venture is not publicly known)",
        nexyondLink: "View Site",
        sectionAwards: "Awards",
        awardTitle: "Best Graduation Project Award",
        awardInstitution: "Marmara University Faculty of Engineering, Computer Science Department",
        awardDate: "June 2023",
        sectionCertificates: "Certificates and Training",
        sectionProjects: "Featured Projects",
        tagAcademic: "Academic",
        projectDesc1: "The work that won the 2023 Best Graduation Project Award at Marmara University Faculty of Engineering, Computer Science Department.",
        projectLink1: "More Information",
        tagConference: "Conference Paper",
        projectDesc2: 'Paper accepted to the "International Conference on Computer Science, Machine Learning and Big Data (ICCSMLBD)" organized by WRFASE.',
        projectLink2: "Access Paper",
        tagCorporate: "Corporate Web Application",
        projectTitle3: "Uludağ Beverage Career Portal",
        projectDesc3: "Career portal application developed as a corporate project.",
        projectLink3: "Access Project",
        sectionOtherProjects: "All Projects",
        githubCta: "You can access all my other projects via my GitHub profile.",
        contactText: "Feel free to contact me through the channels below. I will get back to you as soon as possible!",
        linkedinLink: "My LinkedIn Profile",
        githubLink: "My GitHub Profile",
        kaggleLink: "My Kaggle Profile",
        footerText: "All rights reserved.",
        sectionLiveApps: "Live Applications",
        linkLiveApps: "Live Apps"
    },
    tr: {
        pageTitle: "İsmail Öksüz | Bilgisayar Mühendisi & Prompt Mühendisi",
        sectionProfiles: "Teknik Profiller",
        sectionContact: "İletişim",
        filterAll: "Hepsi",
        filterSoftware: "Yazılım & Dil",
        filterData: "Veritabanı & SQL",
        filterAI: "Yapay Zeka & Prompt",
        filterParticipation: "Katılım & Zirveler",
        hackerRankLink: "HackerRank Profilim",
        headerSubtitle: "Bilgisayar Bilimleri Mühendisi | Prompt Mühendisliği Uzmanı",
        buttonContact: "İletişime Geç",
        buttonCard: "İletişim Kartım",
        menuTitle: "Menü",
        linkAbout: "Hakkımda",
        linkAwards: "Ödüller",
        linkCertificates: "Sertifikalar & Eğitimler",
        linkProjects: "Seçili Projeler",
        linkOtherProjects: "Tüm Projeler",
        linkContact: "İletişim",
        sectionAbout: "Hakkımda",
        aboutText: "Marmara Üniversitesi Bilgisayar Mühendisliği bölümünden Ekim 2023'te mezun oldum. Mühendislik yaklaşımımı yüksek matematiksel zeka ve keskin bir analitik düşünme yapısı üzerine kuruyorum. Karmaşık algoritma problemlerini çözme ve optimize sistemler tasarlama konusunda ileri seviye yetkinliğe sahibim. Hem kurumsal altyapılarda hem de çeşitli freelance projelerde kod geliştirdim. Advanced Prompt Engineering ve yapay zeka araçlarını sadece birer yardımcı değil, yazılım mimarisini hızlandıran ve verimliliği maksimize eden bir uzmanlık alanı olarak kullanıyorum. Temeli sağlam, algoritma ve sonuç odaklı bir mühendisim.",
        nexyondTitle: "Girişimcilik Projesi: NEXYOND",
        nexyondDesc: "Yazılım, Tasarım ve Yapay Zeka ile geleceği bugünden inşa eden, mobil/web çözümlere odaklanan dijital çözümler girişimi. (Girişim, Kimse Tarafından Bilinmeyen)",
        nexyondLink: "Siteyi İncele",
        sectionAwards: "Ödüller",
        awardTitle: "En İyi Bitirme Projesi Ödülü",
        awardInstitution: "Marmara Üniversitesi Mühendislik Fakültesi Bilgisayar Bilimleri Mühendisliği Bölümü",
        awardDate: "Haziran 2023",
        sectionCertificates: "Sertifikalar ve Eğitimler",
        sectionProjects: "Seçili Projeler",
        tagAcademic: "Akademik",
        projectDesc1: "Marmara Üniversitesi Mühendislik Fakültesi Bilgisayar Bilimleri Mühendisliği 2023 En İyi Bitirme Projesi Ödülü'nü kazanan çalışma.",
        projectLink1: "Daha Fazla Bilgi",
        tagConference: "Konferans Bildirisi",
        projectDesc2: 'WRFASE tarafından düzenlenen "International Conference on Computer Science, Machine Learning and Big Data (ICCSMLBD)" konferansına kabul edilen çalışma.',
        projectLink2: "Bildiriye Erişim",
        tagCorporate: "Kurumsal Web Uygulama",
        projectTitle3: "Uludağ İçecek Kariyer Portalı",
        projectDesc3: "Kurumsal bir proje olarak geliştirilen kariyer portalı uygulaması.",
        projectLink3: "Projeye Erişim",
        sectionOtherProjects: "Tüm Projeler",
        githubCta: "Diğer tüm projelerime GitHub profilim üzerinden erişebilirsiniz.",
        contactText: "Aşağıdaki kanallardan benimle iletişime geçmekten çekinmeyin. Size en kısa sürede geri döneceğim!",
        linkedinLink: "LinkedIn Profilim",
        githubLink: "GitHub Profilim",
        kaggleLink: "Kaggle Profilim",
        footerText: "Tüm hakları saklıdır.",
        linkLiveApps: "Canlı Uygulamalar",
        sectionLiveApps: "Canlı Uygulamalar"
    }
};

let currentLang = 'tr';

const languageColors = {
    "Java": "#b07219",
    "Python": "#3572A5",
    "Javascript": "#f1e05a",
    "Typescript": "#3178c6",
    "HTML": "#e34c26",
    "CSS": "#563d7c",
    "MSSQL": "#a91b0d", 
    "C#": "#178600",
    "Shell": "#89e051",
    "Rust": "#dea584",
};

function updateContent() {
    const langData = translations[currentLang];
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (langData[key]) {
            element.textContent = langData[key];
        }
    });
    document.querySelector('title').textContent = langData.pageTitle;
    document.documentElement.lang = currentLang;
    document.getElementById('lang-toggle').textContent = currentLang === 'tr' ? 'EN' : 'TR';
}

async function loadCertificates() {
    try {
        const response = await fetch('data/certificates.json');
        const data = await response.json();
        const container = document.getElementById('cert-list');
        container.innerHTML = '';

        const companyColors = {
            'Hackerrank': 'text-green-600 border-green-600',
            'HackerRank': 'text-green-600 border-green-600',
            'Udemy': 'text-red-600 border-red-600',
            'Sololearn': 'text-blue-600 border-blue-600',
            'Öğrenci Kariyeri': 'text-orange-600 border-orange-600',
            'IEEE Computer Society': 'text-sky-700 border-sky-700'
        };

        Object.values(data).forEach(cert => {
            const name = currentLang === 'tr' ? cert.name_tr : cert.name_en;
            let categoryClass = 'participation'; 
            if (cert.category.some(cat => ['Skill', 'Algorithm', 'Web', 'Excel', 'Course'].includes(cat))) {
                categoryClass = 'software';
            }
            if (cert.category.includes('Database')) {
                categoryClass = 'data';
            }
            if (cert.category.includes('AI') || cert.category.includes('Prompt')) {
                categoryClass = 'ai';
            }
            if (cert.category.includes('Event')) {
                categoryClass = 'participation';
            }

            const colorClass = companyColors[cert.company] || 'text-gray-600 border-gray-600';

            const item = `
                <a href="${cert.url}" target="_blank" class="cert-item ${categoryClass} block group" data-category="${categoryClass}">
                    <div class="flex justify-between items-center border-b py-4 px-3 hover:bg-gray-50 transition-all duration-300">
                        <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3">
                            <span class="font-bold text-gray-800 group-hover:text-accent transition-colors">${name}</span>
                            <span class="text-[10px] w-fit font-semibold border px-2 py-0.5 rounded ${colorClass}">
                                ${cert.company}
                            </span>
                        </div>
                        <div class="text-gray-300 group-hover:text-accent group-hover:translate-x-1 transition-all">
                            <i class="fas fa-chevron-right text-sm"></i>
                        </div>
                    </div>
                </a>
            `;
            container.innerHTML += item;
        });
    } catch (error) {
        console.error('Sertifikalar yüklenemedi:', error);
    }
}

function filterCerts(category) {
    const items = document.querySelectorAll('.cert-item');
    const buttons = document.querySelectorAll('.cert-filter-btn');

    buttons.forEach(btn => {
        btn.classList.remove('active', 'bg-accent', 'text-white');
        btn.classList.add('bg-gray-200', 'text-gray-700');
    });

    const activeBtn = event.currentTarget;
    if(activeBtn) {
        activeBtn.classList.add('active', 'bg-accent', 'text-white');
        activeBtn.classList.remove('bg-gray-200');
    }

    items.forEach(item => {
        if (category === 'all' || item.getAttribute('data-category') === category) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

async function loadLiveProjects() {
    try {
        const response = await fetch('data/live.json');
        const data = await response.json();
        const container = document.getElementById('live-projects-container');
        container.innerHTML = ''; 

        Object.keys(data).forEach(key => {
            const project = data[key];
            const name = currentLang === 'tr' ? project.name_tr : project.name_en;
            const statusText = currentLang === 'tr' ? 'CANLI' : 'LIVE';
            
            const card = `
                <a href="${project.url}" target="_blank" 
                   class="group relative p-8 bg-white rounded-2xl shadow-md hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 border border-gray-100 flex items-center justify-center text-center min-h-[160px]">
                    <div class="absolute top-4 right-4">
                        <i class="fas fa-external-link-alt text-xs text-gray-300 group-hover:text-accent transition-colors"></i>
                    </div>
                    <h4 class="font-extrabold text-gray-800 text-lg md:text-xl leading-tight group-hover:text-accent transition-colors px-6">
                        ${name}
                    </h4>
                    <div class="absolute bottom-4 right-4 flex items-center gap-2">
                        <span class="relative flex h-2 w-2">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                        </span>
                        <span class="text-[10px] font-black tracking-widest text-green-600 uppercase">
                            ${statusText}
                        </span>
                    </div>
                </a>
            `;
            container.innerHTML += card;
        });
    } catch (error) {
        console.error('Canlı projeler yüklenirken hata oluştu:', error);
    }
}

async function loadAllProjects() {
    try {
        const response = await fetch('data/projects.json');
        const data = await response.json();
        const container = document.getElementById('all-projects-container');
        container.innerHTML = '';

        Object.values(data).forEach(project => {
            const name = currentLang === 'tr' ? project.name_tr : project.name_en;
            const languagesHtml = project.used_languages.map(lang => {
                const color = languageColors[lang] || "#8b8b8b";
                return `
                    <span class="flex items-center text-xs font-medium text-gray-600">
                        <span class="w-3 h-3 rounded-full mr-1" style="background-color: ${color}"></span>
                        ${lang}
                    </span>
                `;
            }).join('');

            const card = `
                <a href="${project.url}" target="_blank" class="group p-5 bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-accent transition-all duration-300 flex flex-col justify-between h-full">
                    <div>
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-gray-800 group-hover:text-accent transition-colors">${name}</h4>
                            <i class="fas fa-external-link-alt text-xs text-gray-300 group-hover:text-accent"></i>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-4 mt-4">
                        ${languagesHtml}
                    </div>
                </a>
            `;
            container.innerHTML += card;
        });
    } catch (error) {
        console.error('Tüm projeler yüklenirken hata:', error);
    }
}

function toggleLanguage() {
    currentLang = currentLang === 'tr' ? 'en' : 'tr';
    updateContent();
    loadLiveProjects();
    loadCertificates();
    loadAllProjects();
}

function toggleDrawer() {
    const drawer = document.getElementById('drawer');
    const backdrop = document.getElementById('backdrop');
    drawer.classList.toggle('open');
    backdrop.classList.toggle('open');
}

function closeDrawer() {
    const drawer = document.getElementById('drawer');
    const backdrop = document.getElementById('backdrop');
    drawer.classList.remove('open');
    backdrop.classList.remove('open');
}

document.querySelectorAll('#drawer .menu-link').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        const targetId = this.getAttribute('href');
        if (targetId.startsWith('#')) {
            e.preventDefault(); 
            closeDrawer();
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const preferredLang = (navigator.language || navigator.userLanguage).substring(0, 2);
    currentLang = (preferredLang === 'en' && translations.en) ? 'en' : 'tr';
    updateContent();
    loadLiveProjects();
    loadCertificates();
    loadAllProjects();
});